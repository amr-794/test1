
# منصة نشر الصوتيات - Next.js (Starter)

**ملاحظة مهمة:** هذا المشروع هو نسخة جاهزة للتشغيل محليًا (npm install && npm run dev). الملف `public/uploads` و`data/db.json` يُستخدمان لتخزين الملفات والبيانات محليًا. عند نشر على Vercel، نظام الملفات المؤقت لا يدعم التخزين طويل الأمد. لذا **للنشر على Vercel** يجب استخدام حلول تخزين خارجية (S3 أو Cloudinary) وقاعدة بيانات خارجية (Postgres, MongoDB, Supabase).

## ما تم تضمينه
- واجهة مستخدم رئيسية (index.js) مع عرض المسارات.
- لوحة أدمن بسيطة (admin.js) بكلمة مرور افتراضية `amr/12345` (يمكن تغييرها عن طريق متغير البيئة `ADMIN_PASSWORD`).
- رفع ملف صوتي (ملف أو رابط).
- تخزين بيانات المسارات في `data/db.json`.
- الملفات المرفوعة تحفظ محليًا في `public/uploads`.
- إمكانية حذف المسارات من لوحة الأدمن.
- نظام تعليقات وإعجابات مُخطط له (يمكن توسيع).

## تشغيل محلي
1. استخرج المحتوى.
2. شغّل:
```bash
npm install
npm run dev
```
3. افتح http://localhost:3000

## نشر على Vercel (ملاحظات مهمة)
- Vercel لا يحفظ الملفات التي تُكتب في نظام الملفات بين الاستدعاءات. لحفظ الصوتيات بصورة دائمة:
  - استخدم خدمة تخزين (مثل AWS S3 أو Cloudinary) لوضع الملفات وإرجاع روابط `fileUrl`.
  - عدّل `pages/api/upload.js` لجمع ورفع الملفات إلى الخدمة السحابية بدلاً من حفظها في `public/uploads`.
- استبدل تخزين JSON المحلي بقاعدة بيانات خارجية (Postgres, Supabase, MongoDB). قم بتحديث `lib/db.js` لتستخدم قاعدة بيانات عبر متغير `DATABASE_URL`.
- عيّن متغيرات البيئة في Vercel:
  - `ADMIN_PASSWORD` (لتغيير كلمة الأدمن).
  - `DATABASE_URL` (إن استخدمت DB).
  - مفاتيح السحابة (S3/CLOUDINARY_KEY ...).

## مميزات مقترحة للتطوير لاحقًا (توصياتي)
- دعم السحب والإفلات لإعادة ترتيب المسارات باستخدام `react-beautiful-dnd` (لقد أضفت الحزمة؛ يمكن توسيع الواجهة).
- إضافة نظام تسجيل دخول كامل (SMS أو OAuth) مع Supabase/Auth0.
- إضافة واجهة للأذونات، وتحسين مشغل الصوت (Waveform) باستخدام wavesurfer.js أو howler.js.
- واجهة لإدارة صور الصفحة الرئيسية والصورة الشخصية من الأدمن.

